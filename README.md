# かもっぷるシミュレータ
鴨川に並ぶカップルを待ち行列モデルで再現するシミュレータを作成しました

# 概要
京都府京都市を流れる鴨川は、一級河川にも指定されている京都を代表する風光明媚な河川です。川岸に腰を据えれる場所も多く、特に四条大橋付近は多くの人で賑わいます  
そんな鴨川の名物とされるのが*かもっぷる*と呼ばれる存在です  
かもっぷるとは、鴨川の川岸に腰を据え、川をのんびり眺めながらデートしているカップルのことを指し、かもっぷる達は独特な不文律に従って川岸に座るという習性があります  
こうした習性は待ち行列モデルでシミュレーション可能であると考え、実装に至りました  

# 理論
## 基本
- 鴨川の川岸に座ろうとするカップルは、平均到着率λで鴨川に到着します  
- 到着したカップルは、現在の川岸の状況を確認し、座れる場所を見つけたら直ちに座り、平均サービス率μに従って滞在した後、退去します  
- カップルが座れる場所は、四条大橋から南に向けて進み、次の橋がある160mの区間とし、この区間を160分割した1mごとに座れるか否かの判定を行います  
- 到着したカップルが、その時点で座れる場所が無いと判断した場合、「座れる場所が空くまで待つ」ことはせず、即座に諦めて帰るものとします  
- つまりこのモデルは*待ち行列の長さが0のM/M/160待ち行列モデル*です

## 到着したカップルが座れる条件
「鴨川河川敷における人々の空間占有について : 人の集合に関する研究」( 参考:https://ci.nii.ac.jp/naid/110007674887/ )という論文によると、鴨川において他のカップルから5m距離をとって座っている場合、そのカップルは50%の割合で周囲を気にしなくなる、という研究結果が出ています。これを元に、今回のシミュレータでは「周囲5m以内にカップルが座っている場所は、仮にその場所が空いていたとしても新たにカップルが到着することは無い」とします  
尚、俗に「鴨川等間隔の法則」と呼ばれるような、周囲のカップルの状況に合わせて中間に座る動作は行いません。到着したカップルは、周囲5m以内に他のカップルがい無い地点からランダムに1点を選んで座ります  

# 実行方法
kamogawa.cをコンパイルし、生成された実行ファイルを実行してください
## 入力
- カップルの鴨川訪問率...平均到着率に相当します。0.0~1.0の範囲で指定してください   
- 鴨川河川敷でのカップルの滞在率...サービス率に相当します。0.0~1.0の範囲で指定してください  
- 測定時間...観測を行う時間を測定してください。尚、シミュレーション中は経過時間だけを参照しており、時刻までは反映できません。即ち「夜だから到着率が落ちる」といったことはありません  
- 詳細表示モード...0,1,2の入力を与えることで、出力結果をどれだけ詳細に表示するか選択できます  
    - 0:最終結果のみ出力します  
    - 1:0の出力に加え、カップルの到着と退去も出力します  
    - 2:1の出力に加え、到着場所と現在の鴨川の状況も出力します  

## 2:詳細表示モードの見方
- S:観測地点（四条大橋）を指します。カップルが座った場所はここを基準としています  
- G:観測範囲の逆の端を指します  
- ◎:カップルが到着した点を指します
- ×:カップルが退去した点を指します
- □:座れる場所を指します
- ■:座れない場所を指します

